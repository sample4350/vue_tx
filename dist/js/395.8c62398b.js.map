{"version":3,"file":"js/395.8c62398b.js","mappings":"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","sources":["webpack://v2/./src/views/login.vue","webpack://v2/src/views/login.vue","webpack://v2/./src/views/login.vue?568d","webpack://v2/./src/views/login.vue?512a"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"login\"}},[_c('el-form',{ref:\"ruleForm\",staticClass:\"loginForm\",attrs:{\"model\":_vm.loginForm,\"status-icon\":\"\",\"rules\":_vm.rules,\"label-width\":\"0px\"}},[_c('h3',[_vm._v(\"同城推荐\")]),_c('el-form-item',{staticClass:\"admin\",attrs:{\"prop\":\"mail\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\",\"placeholder\":\"账号\"},model:{value:(_vm.loginForm.mail),callback:function ($$v) {_vm.$set(_vm.loginForm, \"mail\", $$v)},expression:\"loginForm.mail\"}})],1),_c('el-form-item',{staticClass:\"password\",attrs:{\"prop\":\"passwd\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"autocomplete\":\"off\",\"placeholder\":\"密码\"},model:{value:(_vm.loginForm.passwd),callback:function ($$v) {_vm.$set(_vm.loginForm, \"passwd\", $$v)},expression:\"loginForm.passwd\"}})],1),_c('el-form-item',{staticClass:\"checkbox\",attrs:{\"prop\":\"type\"}},[_c('el-checkbox',{attrs:{\"label\":\"记住我\",\"name\":\"type\"},model:{value:(_vm.check),callback:function ($$v) {_vm.check=$$v},expression:\"check\"}}),_c('router-link',{staticClass:\"register\",attrs:{\"to\":\"/register\"}},[_vm._v(\"注册账号\")])],1),_c('el-form-item',{staticClass:\"login\"},[_c('el-button',{staticClass:\"btn\",attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":_vm.login}},[_vm._v(\"登录\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"login\">\r\n    <!-- 登录界面 -->\r\n    <el-form\r\n      :model=\"loginForm\"\r\n      status-icon\r\n      :rules=\"rules\"\r\n      ref=\"ruleForm\"\r\n      label-width=\"0px\"\r\n      class=\"loginForm\"\r\n    >\r\n      <h3>同城推荐</h3>\r\n\r\n      <el-form-item prop=\"mail\" class=\"admin\">\r\n        <el-input\r\n          type=\"text\"\r\n          v-model=\"loginForm.mail\"\r\n          autocomplete=\"off\"\r\n          placeholder=\"账号\"\r\n        ></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"passwd\" class=\"password\">\r\n        <el-input\r\n          type=\"password\"\r\n          v-model=\"loginForm.passwd\"\r\n          autocomplete=\"off\"\r\n          placeholder=\"密码\"\r\n        ></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"type\" class=\"checkbox\">\r\n        <el-checkbox label=\"记住我\" name=\"type\" v-model=\"check\"></el-checkbox>\r\n        <router-link to=\"/register\" class=\"register\">注册账号</router-link>\r\n      </el-form-item>\r\n\r\n      <el-form-item class=\"login\">\r\n        <el-button size=\"mini\" class=\"btn\" type=\"primary\" @click=\"login\"\r\n          >登录</el-button\r\n        >\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Login } from \"@/api/user\";\r\nexport default {\r\n  name: \"login\",\r\n  data() {\r\n    return {\r\n      loginForm: {\r\n        mail: \"\",\r\n        passwd: \"\",\r\n      },\r\n      rules: {\r\n        // 邮箱校验\r\n        mail: [\r\n          {\r\n            trigger: \"blur\",\r\n            validator(rule, value, callback) {\r\n              // const reg1 = /^\\d{10}$/;\r\n              const reg2 =\r\n                /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\r\n              if (reg2.test(value)) {\r\n                callback();\r\n              } else if (value === \"\") {\r\n                callback(new Error(\"请输入邮箱\"));\r\n              } else {\r\n                callback(new Error(\"邮箱格式错误\"));\r\n              }\r\n            },\r\n          },\r\n        ],\r\n        // 密码校验\r\n        passwd: [\r\n          {\r\n            trigger: \"blur\",\r\n            validator(rule, value, callback) {\r\n              const reg = /^\\w{8,12}$/;\r\n              if (reg.test(value) === false) {\r\n                callback(new Error(\"请输入8-12位的密码,且不能包含特殊字符\"));\r\n              }\r\n            },\r\n          },\r\n        ],\r\n      },\r\n      check: this.$store.state.check,\r\n    };\r\n  },\r\n  methods: {\r\n    // 登录\r\n    async login() {\r\n      // 提交表单账号密码，请求登录\r\n      try {\r\n        const { data } = await Login(this.loginForm);\r\n        // console.log(data);\r\n        if (data.data == null) {\r\n          this.$message.error(\"登陆失败\");\r\n          return;\r\n        }\r\n        // 返回的数据中带有token，保存token到本地\r\n        this.$store.commit(\"setUser\", data.data);\r\n        this.$message({\r\n          message: \"登录成功\",\r\n          type: \"success\",\r\n        });\r\n        // 登录成功跳转到偏好设置\r\n        this.$router.push({ path: \"/map\" });\r\n        this.$store.commit(\"setMail\", this.loginForm.mail);\r\n        this.$store.commit(\"setPasswd\", this.loginForm.passwd);\r\n      } catch (error) {\r\n        this.$message.error(\"登陆失败\");\r\n        console.log(error);\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    if (this.check) {\r\n      this.loginForm.mail = this.$store.state.mail;\r\n      this.loginForm.passwd = this.$store.state.passwd;\r\n    }\r\n  },\r\n  watch: {\r\n    check(newval, oldval) {\r\n      if (newval === true) {\r\n        this.$store.commit(\"setSave\", this.check);\r\n      } else {\r\n        this.$store.commit(\"setSave\", this.check);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#login {\r\n  height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  .loginForm {\r\n    background-color: #fff;\r\n    height: 400px;\r\n    width: 520px;\r\n    border-radius: 5px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n\r\n    h3 {\r\n      margin-top: 40px;\r\n      letter-spacing: 2px;\r\n      font-size: 25px;\r\n      font-weight: normal;\r\n    }\r\n\r\n    .admin {\r\n      margin-top: 50px;\r\n      width: 70%;\r\n    }\r\n\r\n    .password {\r\n      width: 70%;\r\n    }\r\n\r\n    .checkbox {\r\n      width: 70%;\r\n      display: flex;\r\n      position: relative;\r\n\r\n      .register {\r\n        position: absolute;\r\n        left: 305px;\r\n        width: 60px;\r\n        cursor: pointer;\r\n      }\r\n    }\r\n\r\n    .login {\r\n      width: 70%;\r\n      .btn {\r\n        height: 40px;\r\n        width: 100%;\r\n        font-size: 15px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=60080d98&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=60080d98&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"60080d98\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","ref","staticClass","loginForm","rules","_v","model","value","mail","callback","$$v","$set","expression","passwd","check","on","login","staticRenderFns","name","data","trigger","validator","rule","reg2","test","Error","reg","$store","state","methods","Login","$message","error","commit","message","type","$router","push","path","console","log","mounted","watch","newval","oldval","component"],"sourceRoot":""}