{"version":3,"file":"js/335.9907caaf.js","mappings":"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","sources":["webpack://v2/./src/views/register.vue","webpack://v2/src/views/register.vue","webpack://v2/./src/views/register.vue?4fd8","webpack://v2/./src/views/register.vue?f255"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"register\"}},[_c('el-form',{ref:\"ruleForm\",staticClass:\"registerForm\",attrs:{\"model\":_vm.registerForm,\"status-icon\":\"\",\"rules\":_vm.rules,\"label-width\":\"0px\"}},[_c('el-form-item',{staticClass:\"title\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":11}},[_c('i',{staticClass:\"el-icon-back\",on:{\"click\":_vm.backFn}})]),_c('el-col',{attrs:{\"span\":3}},[_c('h3',[_vm._v(\"注册\")])])],1)],1),_c('el-form-item',{staticClass:\"nickName\",attrs:{\"prop\":\"nickname\"}},[_c('el-input',{staticClass:\"input-1st\",attrs:{\"type\":\"text\",\"autocomplete\":\"off\",\"placeholder\":\"昵称\"},model:{value:(_vm.registerForm.nickname),callback:function ($$v) {_vm.$set(_vm.registerForm, \"nickname\", $$v)},expression:\"registerForm.nickname\"}})],1),_c('el-form-item',{staticClass:\"upload\"},[_c('span',[_vm._v(\"上传头像\")]),_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"https://jsonplaceholder.typicode.com/posts/\",\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.imageUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.imageUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})]),_c('span',[_vm._v(\"请上传大于1000*1000的图片\")])],1),_c('el-form-item',{staticClass:\"email\",attrs:{\"prop\":\"mail\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\",\"placeholder\":\"邮箱\"},model:{value:(_vm.registerForm.mail),callback:function ($$v) {_vm.$set(_vm.registerForm, \"mail\", $$v)},expression:\"registerForm.mail\"}})],1),_c('el-form-item',{staticClass:\"email\",attrs:{\"prop\":\"code\"}},[_c('el-input',{staticClass:\"input-2st\",attrs:{\"type\":\"text\",\"autocomplete\":\"off\",\"placeholder\":\"验证码\"},model:{value:(_vm.registerForm.code),callback:function ($$v) {_vm.$set(_vm.registerForm, \"code\", $$v)},expression:\"registerForm.code\"}}),_c('el-button',{staticClass:\"check\",attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":_vm.sendCode}},[_vm._v(\"发送验证码\")])],1),_c('el-form-item',{staticClass:\"passwordSet\",attrs:{\"prop\":\"passwd\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"autocomplete\":\"off\",\"placeholder\":\"密码\"},model:{value:(_vm.registerForm.passwd),callback:function ($$v) {_vm.$set(_vm.registerForm, \"passwd\", $$v)},expression:\"registerForm.passwd\"}})],1),_c('el-form-item',{staticClass:\"commit\"},[_c('el-button',{staticClass:\"btn\",attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":_vm.register}},[_vm._v(\"提交\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"register\">\r\n    <!-- 注册界面 -->\r\n    <el-form\r\n      :model=\"registerForm\"\r\n      status-icon\r\n      :rules=\"rules\"\r\n      ref=\"ruleForm\"\r\n      label-width=\"0px\"\r\n      class=\"registerForm\"\r\n    >\r\n      <el-form-item class=\"title\">\r\n        <el-row>\r\n          <el-col :span=\"11\">\r\n            <i class=\"el-icon-back\" @click=\"backFn\"></i>\r\n          </el-col>\r\n          <el-col :span=\"3\">\r\n            <h3>注册</h3>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"nickname\" class=\"nickName\">\r\n        <el-input\r\n          type=\"text\"\r\n          v-model=\"registerForm.nickname\"\r\n          autocomplete=\"off\"\r\n          placeholder=\"昵称\"\r\n          class=\"input-1st\"\r\n        ></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item class=\"upload\">\r\n        <span>上传头像</span>\r\n        <el-upload\r\n          class=\"avatar-uploader\"\r\n          action=\"https://jsonplaceholder.typicode.com/posts/\"\r\n          :show-file-list=\"false\"\r\n          :on-success=\"handleAvatarSuccess\"\r\n          :before-upload=\"beforeAvatarUpload\"\r\n        >\r\n          <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\" />\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n\r\n        <span>请上传大于1000*1000的图片</span>\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"mail\" class=\"email\">\r\n        <el-input\r\n          type=\"text\"\r\n          v-model=\"registerForm.mail\"\r\n          autocomplete=\"off\"\r\n          placeholder=\"邮箱\"\r\n        ></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"code\" class=\"email\">\r\n        <el-input\r\n          type=\"text\"\r\n          v-model=\"registerForm.code\"\r\n          autocomplete=\"off\"\r\n          placeholder=\"验证码\"\r\n          class=\"input-2st\"\r\n        ></el-input>\r\n        <el-button @click=\"sendCode\" size=\"mini\" type=\"primary\" class=\"check\"\r\n          >发送验证码</el-button\r\n        >\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"passwd\" class=\"passwordSet\">\r\n        <el-input\r\n          type=\"password\"\r\n          v-model=\"registerForm.passwd\"\r\n          autocomplete=\"off\"\r\n          placeholder=\"密码\"\r\n        ></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item class=\"commit\">\r\n        <el-button size=\"mini\" class=\"btn\" type=\"primary\" @click=\"register\"\r\n          >提交</el-button\r\n        >\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { SendCode, Register, CheckCode } from \"../api/user\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      registerForm: {\r\n        mail: \"\",\r\n        nickname: \"\",\r\n        passwd: \"\",\r\n        code: \"\",\r\n      },\r\n      rules: {\r\n        // 密码校验\r\n        passwd: [\r\n          {\r\n            trigger: \"blur\",\r\n            validator(rule, value, callback) {\r\n              const reg = /^\\w{8,12}$/;\r\n              if (reg.test(value) === false) {\r\n                callback(new Error(\"请输入8-12位的密码,且不能包含特殊字符\"));\r\n              }\r\n            },\r\n          },\r\n        ],\r\n        // 邮箱校验\r\n        mail: [\r\n          {\r\n            validator(rule, value, callback) {\r\n              const reg =\r\n                /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\r\n              if (reg.test(value)) {\r\n                callback();\r\n              } else if (value === \"\") {\r\n                callback(new Error(\"请输入邮箱\"));\r\n              } else {\r\n                callback(new Error(\"邮箱格式错误\"));\r\n              }\r\n            },\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n      imageUrl: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    // 返回登录界面\r\n    backFn() {\r\n      this.$router.back();\r\n    },\r\n    // 发送验证码\r\n    async sendCode() {\r\n      const mail = this.registerForm.mail;\r\n      try {\r\n        const res = await SendCode(mail);\r\n        console.log(res);\r\n        this.$message({\r\n          message: \"验证码发送成功\",\r\n          type: \"success\",\r\n        });\r\n      } catch (error) {\r\n        this.$message.error(\"验证码发送失败\");\r\n        console.log(error);\r\n      }\r\n    },\r\n    // 注册\r\n    async register() {\r\n      const registerForm = this.registerForm;\r\n      // 验证code\r\n      try {\r\n        const res = await CheckCode(registerForm);\r\n        console.log(res);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n      // 提交表单信息注册\r\n      try {\r\n        const res = await Register(registerForm);\r\n        console.log(res);\r\n        this.$message({\r\n          message: \"注册成功\",\r\n          type: \"success\",\r\n        });\r\n        // 保存邮箱到本地\r\n        this.$store.commit(\"setMail\", registerForm.mail);\r\n        this.$store.commit(\"setNickName\", registerForm.nickname);\r\n        this.$store.commit(\"setPasswd\", registerForm.passwd);\r\n      } catch (error) {\r\n        this.$message.error(\"注册失败\");\r\n        console.log(error);\r\n      }\r\n    },\r\n    // 上传用户头像\r\n    handleAvatarSuccess(res, file) {\r\n      this.imageUrl = URL.createObjectURL(file.raw);\r\n    },\r\n    beforeAvatarUpload(file) {\r\n      const isJPG = file.type === \"image/jpeg\";\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n      if (!isJPG) {\r\n        this.$message.error(\"上传头像图片只能是 JPG 格式!\");\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\r\n      }\r\n      return isJPG && isLt2M;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#register {\r\n  height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  .registerForm {\r\n    height: 650px;\r\n    width: 500px;\r\n    background-color: #fff;\r\n    border-radius: 5px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    .title {\r\n      margin-top: 30px;\r\n      width: 80%;\r\n      .el-icon-back {\r\n        font-size: 20px;\r\n        text-align: center;\r\n        line-height: 45px;\r\n        color: #333;\r\n      }\r\n      .el-icon-back:hover {\r\n        color: #409eff;\r\n      }\r\n    }\r\n    h3 {\r\n      font-size: 20px;\r\n      font-weight: normal;\r\n    }\r\n    .nickName {\r\n      width: 80%;\r\n      margin-top: 10px;\r\n      .input-1st {\r\n        width: 100%;\r\n      }\r\n      .randomBtn {\r\n        margin-left: 20px;\r\n      }\r\n    }\r\n\r\n    .email {\r\n      width: 80%;\r\n      // margin-top: 10px;\r\n      .input-2st {\r\n        width: 250px;\r\n      }\r\n      .check {\r\n        margin-left: 40px;\r\n      }\r\n    }\r\n\r\n    .passwordSet {\r\n      width: 80%;\r\n      // margin-top: 20px;\r\n    }\r\n\r\n    .commit {\r\n      width: 80%;\r\n      margin-top: 10px;\r\n      .btn {\r\n        width: 100%;\r\n        height: 40px;\r\n      }\r\n    }\r\n    .avatar-uploader {\r\n      margin-right: 300px;\r\n      height: 100px;\r\n      width: 100px;\r\n      border: 1px dashed #d9d9d9;\r\n      border-radius: 5px;\r\n      .avatar-uploader-icon {\r\n        line-height: 100px;\r\n      }\r\n    }\r\n\r\n    .avatar-uploader:hover {\r\n      border: 1px dashed #409eff;\r\n    }\r\n\r\n    /deep/ .el-upload {\r\n      height: 100px;\r\n      width: 100px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./register.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./register.vue?vue&type=template&id=c1802a74&scoped=true&\"\nimport script from \"./register.vue?vue&type=script&lang=js&\"\nexport * from \"./register.vue?vue&type=script&lang=js&\"\nimport style0 from \"./register.vue?vue&type=style&index=0&id=c1802a74&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c1802a74\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","ref","staticClass","registerForm","rules","on","backFn","_v","model","value","nickname","callback","$$v","$set","expression","handleAvatarSuccess","beforeAvatarUpload","imageUrl","mail","code","sendCode","passwd","register","staticRenderFns","data","trigger","validator","rule","reg","test","Error","methods","$router","back","res","SendCode","console","log","$message","message","type","error","CheckCode","Register","$store","commit","file","URL","createObjectURL","raw","isJPG","isLt2M","size","component"],"sourceRoot":""}