{"version":3,"file":"js/2.d18e513c.js","mappings":"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","sources":["webpack://v2/./src/views/my.vue","webpack://v2/src/views/my.vue","webpack://v2/./src/views/my.vue?e609","webpack://v2/./src/views/my.vue?6a2c"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"my\"}},[_c('el-form',{staticClass:\"myForm\",attrs:{\"model\":_vm.myForm}},[_c('el-form-item',{staticClass:\"title\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":10}},[_c('i',{staticClass:\"el-icon-back\",on:{\"click\":_vm.backFn}})]),_c('el-col',{attrs:{\"span\":4}},[_c('h3',[_vm._v(\"用户中心\")])])],1)],1),_c('el-form-item',{staticClass:\"t1\"},[_vm._v(\"修改密码\")]),_c('el-form-item',{staticClass:\"modify\"},[_c('el-input',{staticClass:\"input-1st\",attrs:{\"type\":\"password\",\"placeholder\":\"新密码\",\"pass\":\"passwd\"},model:{value:(_vm.myForm.passwd),callback:function ($$v) {_vm.$set(_vm.myForm, \"passwd\", $$v)},expression:\"myForm.passwd\"}}),_c('el-button',{staticClass:\"btn-1st\",attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.modifyPasswd}},[_vm._v(\"提交\")])],1),_c('el-form-item',{staticClass:\"t1\"},[_vm._v(\"修改昵称\")]),_c('el-form-item',{staticClass:\"modify\"},[_c('el-input',{staticClass:\"input-1st\",attrs:{\"type\":\"text\",\"placeholder\":\"新昵称\",\"pass\":\"nickname\"},model:{value:(_vm.myForm.nickname),callback:function ($$v) {_vm.$set(_vm.myForm, \"nickname\", $$v)},expression:\"myForm.nickname\"}}),_c('el-button',{staticClass:\"btn-1st\",attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.modifyNicName}},[_vm._v(\"提交\")])],1),_c('el-form-item',{staticClass:\"upload\"},[_c('span',[_vm._v(\"修改头像\")]),_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"https://jsonplaceholder.typicode.com/posts/\",\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.imageUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.imageUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})]),_c('el-button',{staticClass:\"btn-1st\",attrs:{\"type\":\"primary\",\"size\":\"mini\"}},[_vm._v(\"提交\")])],1),_c('el-form-item',{staticClass:\"exit\"},[_c('el-button',{staticClass:\"exitBtn\",attrs:{\"type\":\"warning\",\"size\":\"mini\"},on:{\"click\":_vm.toLogin}},[_vm._v(\"退出登录\")])],1),_c('el-form-item',{staticClass:\"exit\"},[_c('el-button',{staticClass:\"exitBtn\",attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":_vm.delUser}},[_vm._v(\"注销\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"my\">\r\n    <el-form :model=\"myForm\" class=\"myForm\">\r\n      <el-form-item class=\"title\">\r\n        <el-row>\r\n          <el-col :span=\"10\">\r\n            <i class=\"el-icon-back\" @click=\"backFn\"></i>\r\n          </el-col>\r\n          <el-col :span=\"4\">\r\n            <h3>用户中心</h3>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form-item>\r\n\r\n      <el-form-item class=\"t1\">修改密码</el-form-item>\r\n      <!-- <el-form-item class=\"modify\">\r\n        <el-input\r\n          type=\"password\"\r\n          placeholder=\"原密码\"\r\n          pass=\"passwd\"\r\n          v-model=\"myForm.passwd\"\r\n          class=\"input-1st\"\r\n        ></el-input>\r\n      </el-form-item> -->\r\n      <el-form-item class=\"modify\">\r\n        <el-input\r\n          type=\"password\"\r\n          placeholder=\"新密码\"\r\n          pass=\"passwd\"\r\n          v-model=\"myForm.passwd\"\r\n          class=\"input-1st\"\r\n        ></el-input>\r\n        <el-button\r\n          type=\"primary\"\r\n          @click=\"modifyPasswd\"\r\n          size=\"mini\"\r\n          class=\"btn-1st\"\r\n          >提交</el-button\r\n        >\r\n      </el-form-item>\r\n\r\n      <el-form-item class=\"t1\">修改昵称</el-form-item>\r\n      <el-form-item class=\"modify\">\r\n        <el-input\r\n          type=\"text\"\r\n          placeholder=\"新昵称\"\r\n          pass=\"nickname\"\r\n          v-model=\"myForm.nickname\"\r\n          class=\"input-1st\"\r\n        ></el-input>\r\n        <el-button\r\n          type=\"primary\"\r\n          @click=\"modifyNicName\"\r\n          size=\"mini\"\r\n          class=\"btn-1st\"\r\n          >提交</el-button\r\n        >\r\n      </el-form-item>\r\n\r\n      <el-form-item class=\"upload\">\r\n        <span>修改头像</span>\r\n        <el-upload\r\n          class=\"avatar-uploader\"\r\n          action=\"https://jsonplaceholder.typicode.com/posts/\"\r\n          :show-file-list=\"false\"\r\n          :on-success=\"handleAvatarSuccess\"\r\n          :before-upload=\"beforeAvatarUpload\"\r\n        >\r\n          <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\" />\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n        <el-button type=\"primary\" size=\"mini\" class=\"btn-1st\">提交</el-button>\r\n      </el-form-item>\r\n\r\n      <el-form-item class=\"exit\">\r\n        <el-button type=\"warning\" size=\"mini\" class=\"exitBtn\" @click=\"toLogin\"\r\n          >退出登录</el-button\r\n        >\r\n      </el-form-item>\r\n\r\n      <el-form-item class=\"exit\">\r\n        <el-button type=\"danger\" size=\"mini\" class=\"exitBtn\" @click=\"delUser\"\r\n          >注销</el-button\r\n        >\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ModifyPasswd, ModifyNickName, DelUser } from \"@/api/user\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      myForm: {\r\n        mail: this.$store.state.mail,\r\n        passwd: \"\",\r\n        nickname: \"\",\r\n      },\r\n      imageUrl: \"\",\r\n      localStorage: {\r\n        mail: this.$store.state.mail,\r\n        nickname: this.$store.state.nickname,\r\n        passwd: this.$store.state.passwd,\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    // 修改密码\r\n    async modifyPasswd() {\r\n      try {\r\n        const res = await ModifyPasswd(this.myForm);\r\n        console.log(res);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    // 修改昵称\r\n    async modifyNicName() {\r\n      try {\r\n        const res = await ModifyNickName(this.myForm);\r\n        console.log(res);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    // 注销账号\r\n    async delUser() {\r\n      try {\r\n        const res = await DelUser(this.localStorage);\r\n        console.log(res);\r\n        this.$message({\r\n          message: \"注销成功\",\r\n          type: \"success\",\r\n        });\r\n        this.$router.push({path: '/'})\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    backFn() {\r\n      this.$router.back();\r\n    },\r\n    toLogin() {\r\n      this.$router.push({ path: \"login\" });\r\n      this.$message({\r\n        message: \"退出成功\",\r\n        type: \"success\",\r\n      });\r\n    },\r\n    // 上传用户头像\r\n    handleAvatarSuccess(res, file) {\r\n      this.imageUrl = URL.createObjectURL(file.raw);\r\n    },\r\n    beforeAvatarUpload(file) {\r\n      const isJPG = file.type === \"image/jpeg\";\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n      if (!isJPG) {\r\n        this.$message.error(\"上传头像图片只能是 JPG 格式!\");\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\r\n      }\r\n      return isJPG && isLt2M;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#my {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100vh;\r\n  .myForm {\r\n    height: 700px;\r\n    width: 500px;\r\n    background-color: #fff;\r\n    border-radius: 5px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    // justify-content: center;\r\n    align-items: center;\r\n    .title {\r\n      width: 80%;\r\n      height: 40px;\r\n      .el-icon-back {\r\n        line-height: 100px;\r\n      }\r\n    }\r\n    h3 {\r\n      margin-top: 30px;\r\n    }\r\n    .t1 {\r\n      // border: 1px solid #000;\r\n      width: 80%;\r\n      margin-top: 20px;\r\n    }\r\n    .modify {\r\n      width: 80%;\r\n      // margin-top: 10px;\r\n      //   display: flex;\r\n      //   justify-content: center;\r\n      //   align-items: center;\r\n      // border: 1px solid #000;\r\n      .input-1st {\r\n        width: 70%;\r\n      }\r\n      .btn-1st {\r\n        margin-left: 20px;\r\n      }\r\n    }\r\n    .upload {\r\n      display: flex;\r\n      width: 80%;\r\n    }\r\n    .avatar-uploader {\r\n      margin-right: 300px;\r\n      height: 100px;\r\n      width: 100px;\r\n      border: 1px dashed #d9d9d9;\r\n      border-radius: 5px;\r\n      .avatar-uploader-icon {\r\n        line-height: 100px;\r\n      }\r\n    }\r\n\r\n    .avatar-uploader:hover {\r\n      border: 1px dashed #409eff;\r\n    }\r\n\r\n    /deep/ .el-upload {\r\n      height: 100px;\r\n      width: 100px;\r\n    }\r\n    .exit {\r\n      width: 80%;\r\n      .exitBtn {\r\n        width: 100%;\r\n        height: 40px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./my.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./my.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./my.vue?vue&type=template&id=027ec26e&scoped=true&\"\nimport script from \"./my.vue?vue&type=script&lang=js&\"\nexport * from \"./my.vue?vue&type=script&lang=js&\"\nimport style0 from \"./my.vue?vue&type=style&index=0&id=027ec26e&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"027ec26e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","staticClass","myForm","on","backFn","_v","model","value","passwd","callback","$$v","$set","expression","modifyPasswd","nickname","modifyNicName","handleAvatarSuccess","beforeAvatarUpload","imageUrl","toLogin","delUser","staticRenderFns","data","mail","$store","state","localStorage","methods","res","ModifyPasswd","console","log","error","ModifyNickName","DelUser","$message","message","type","$router","push","path","back","file","URL","createObjectURL","raw","isJPG","isLt2M","size","component"],"sourceRoot":""}